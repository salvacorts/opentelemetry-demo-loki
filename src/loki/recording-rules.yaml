groups:
  - name: Payments
    interval: 1m
    rules:
      - record: payment_errors:1m
        expr: |
          sum (
            count_over_time(
              {service="payment-service"}
              | json
              | err_message=~".+"
              [1m]
            )
          )